<html>
  <head>
    <title>TF Quiet</title>
    <meta name="description" content="Dynamically cut out the noise from terraform plan output (post-hoc)">
    <link rel="stylesheet" href="./style.css"/>
  </head>

  <body>
    <form onSubmit="javascript:quieten(event)">
      <button onClick="javascript:clearInput(event)" class="secondary">Clear input</button>
      <textarea id="tf-plan" rows="8"></textarea>
      <button type="submit" class="primary">Quieten</button>
      <button onClick="javascript:clearOutput(event)" class="secondary alt">Clear output</button>

      <div id="controls">
        <span>
          <input id="hide-unchanged" type="checkbox" onChange="javascript:hideUnchanged(event)"/>
          <label for="hide-unchanged">Hide unchanged lines</label>
        </span>
        <span>
          <input id="hide-comments" type="checkbox" onChange="javascript:hideComments(event)"/>
          <label for="hide-comments">Hide comments</label>
        </span>
      </div>
    </form>

    <div id="summary"></div>
    <div id="quiet"></div>

    <script type="module">
      import { onClick, onChange } from './tf-quiet.js'
      const globalFrom = container => it => { globalThis[it] = container[it] };

      ['quieten', 'clearInput', 'clearOutput'].forEach(globalFrom(onClick));
      ['hideUnchanged', 'hideComments'].forEach(globalFrom(onChange))
    </script>
    <script src="./collapsible-block.js" charset="utf-8"></script>
  </body>
</html>
