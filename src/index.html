<html>
  <head>
    <title>TF Quiet</title>
    <meta name="description" content="Dynamically cut out the noise from terraform plan output (post-hoc)">
    <!-- favicon: "quiet" by mungang kim, KR - from the Noun Project -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="./style.css"/>
  </head>

  <body>
    <form onSubmit="javascript:quieten(event)">
      <button onClick="javascript:clearInput(event)" class="secondary">Clear input</button>
      <textarea id="tf-plan" rows="8"></textarea>
      <button type="submit" class="primary">Quieten</button>
      <button onClick="javascript:clearOutput(event)" class="secondary alt">Clear output</button>
    </form>

    <div id="summary" class="hidden"></div>

    <div id="controls" class="hidden">
      <span>
        <input id="hide-unchanged" type="checkbox" onChange="javascript:hideUnchanged(event)"/>
        <label for="hide-unchanged">Hide unchanged lines</label>
      </span>
      <button onClick="javascript:collapseAll(event)" class="tertiary">Collapse all</button>
      <button onClick="javascript:expandAll(event)" class="tertiary">Expand all</button>
      <span>
        <input id="hide-comments" type="checkbox" onChange="javascript:hideComments(event)"/>
        <label for="hide-comments">Hide comments</label>
      </span>
    </div>

    <div id="quiet"></div>

    <script type="module">
      import { onClick, onChange } from './tf-quiet.js'
      const globalFrom = (container, names) => { names.forEach(it => { globalThis[it] = container[it] }) }

      globalFrom(onClick, ['quieten', 'clearInput', 'clearOutput', 'collapseAll', 'expandAll'])
      globalFrom(onChange, ['hideUnchanged', 'hideComments'])
    </script>
    <script src="./collapsible-block.js" charset="utf-8"></script>
  </body>
</html>
